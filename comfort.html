<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æ¸©æŸ”çš„ä¸€å¥è¯</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      font-family: 'Georgia', sans-serif;
      background: radial-gradient(ellipse at top, #fce4ec, #e3f2fd);
      user-select: none;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 0;
      pointer-events: none;
    }

    .card {
      position: relative;
      z-index: 2;
      max-width: 700px;
      width: 90%;
      margin: 12vh auto;
      background: rgba(255, 255, 255, 0.92);
      padding: 40px 30px;
      border-radius: 16px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
      text-align: center;
    }

    h2 {
      color: #e26a8d;
      margin-bottom: 25px;
      font-size: 28px;
    }

    .message {
      font-size: 18px;
      line-height: 1.8;
      min-height: 100px;
      margin-bottom: 30px;
      transition: opacity 0.4s ease;
      white-space: pre-line;
    }

    .footer {
      margin-top: 30px;
      text-align: right;
      font-style: italic;
      color: #888;
    }

    button {
      background: #e26a8d;
      color: white;
      border: none;
      padding: 10px 22px;
      font-size: 15px;
      border-radius: 30px;
      cursor: pointer;
      box-shadow: 0 0 10px #e26a8d;
      margin: 8px;
    }
  </style>
</head>
<body>

<canvas id="bg"></canvas>
<canvas id="hearts"></canvas>

<div class="card">
  <h2>ä¸€å°å†™ç»™ä½ çš„æ¸©æŸ”ä¿¡ä»¶ ğŸ’Œ</h2>
  <div class="message" id="message"></div>
  <div>
    <button onclick="showRandomMessage()">å†å¬ä¸€å¥ ğŸŒ¸</button>
  </div>
  <div class="footer">â€”â€” æƒ³é™ªä½ æ…¢æ…¢å˜å¥½çš„äºº</div>
</div>

<audio id="bgm" src="https://cdn.pixabay.com/download/audio/2023/03/28/audio_40654f931e.mp3?filename=romantic-piano-144186.mp3" autoplay loop></audio>

<script>
  const messages = [
    "è€ƒè¯•å¤±è´¥ä¸æ˜¯ç»ˆç‚¹ï¼Œ\nåªæ˜¯æˆé•¿é‡Œæ¸©æŸ”çš„ä¸€æ¬¡è½¬å¼¯ã€‚",
    "ä½ å¯ä»¥éš¾è¿‡ï¼Œ\nä½†åˆ«æ€€ç–‘è‡ªå·±ã€‚",
    "ä½ æ˜¯æ¸©æŸ”æœ¬èº«ï¼Œ\nä¸–ç•Œè¿Ÿæ—©ä¼šæ‡‚ä½ ã€‚",
    "æ²¡æœ‰å…³ç³»ï¼Œ\nä¸å®Œç¾çš„äººç”Ÿä¹Ÿå€¼å¾—è¢«æ‹¥æŠ±ã€‚",
    "æˆç»©ä¸ä»£è¡¨ä¸€åˆ‡ï¼Œ\nä½ ä¾ç„¶æ˜¯ç‹¬ä¸€æ— äºŒçš„å­˜åœ¨ã€‚",
    "å°±ç®—ä¸€æ—¶è½åï¼Œ\nä¹Ÿä¸ä»£è¡¨ä½ æ²¡æœ‰æœªæ¥ã€‚",
    "äººç”Ÿæœ¬å°±æœ‰èµ·ä¼ï¼Œ\nä½ åªæ˜¯è¿˜æ²¡åˆ°å±äºä½ çš„é«˜å³°ã€‚",
    "æ„¿ä½ ä¸å†ä¸ºåˆ†æ•°ç„¦è™‘ï¼Œ\nä¸ºè‡ªå·±çš„åŠªåŠ›è‡ªè±ªã€‚",
    "ä½ æ‰€ç»å†çš„ä¸€åˆ‡ï¼Œ\néƒ½ä¼šæˆä¸ºæ¸©æŸ”çš„åŠ›é‡ã€‚",
    "è¿™ä¸ªä¸–ç•Œä¸ä¼šå› ä¸ºä¸€æ¬¡å¤±è´¥æŠ›å¼ƒä½ ï¼Œ\næˆ‘ä¹Ÿæ˜¯ã€‚",
    "ä½ å¹¶ä¸å­¤å•ï¼Œ\næ€»æœ‰äººé»˜é»˜ä¸ºä½ åŠ æ²¹ã€‚",
    "åˆ«æ€•æ…¢ï¼Œ\né‡è¦çš„æ˜¯ä½ åœ¨èµ°ã€‚",
    "ä½ å€¼å¾—æ›´å¥½çš„ä¸€åˆ‡ï¼Œ\nè¿™ä¸€æ¬¡ä¸è¿‡æ˜¯è¿‡ç¨‹ã€‚",
    "ä½ å“­è¿‡çš„å¤œæ™šï¼Œ\nä¼šç…§äº®ä½ å‰è¿›çš„æ–¹å‘ã€‚",
    "ä½ æ˜¯ä½ è‡ªå·±æœ€å¤§çš„å…‰ï¼Œ\nåˆ«å¿˜äº†ã€‚",
    "å¤±è´¥å¹¶ä¸å¯æ€•ï¼Œ\næ”¾å¼ƒæ‰æ˜¯ã€‚",
    "ä½ ä¸éœ€è¦æ‹¿æˆç»©è¯æ˜è‡ªå·±çš„ä»·å€¼ã€‚",
    "æœªæ¥å¾ˆè¿œå¾ˆç¾ï¼Œ\nåˆ«è®©ä¸€æ¬¡å¤±è´¥å›°ä½ä½ ã€‚",
    "ä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥çš„ï¼Œ\nè¯·ä½ ä¸€å®šè¦ç›¸ä¿¡ã€‚",
    "ä½ å·²ç»å¾ˆæ£’äº†ï¼Œ\nä¸è¦å¯¹è‡ªå·±å¤ªè‹›åˆ»ã€‚"
  ];

  let lastIndex = -1;

  const messageEl = document.getElementById("message");

  function showRandomMessage() {
    let next;
    do {
      next = Math.floor(Math.random() * messages.length);
    } while (next === lastIndex);
    lastIndex = next;
    typeText(messages[next]);
  }

  function typeText(text) {
    messageEl.innerText = '';
    let i = 0;
    function type() {
      if (i < text.length) {
        messageEl.innerText += text[i++];
        setTimeout(type, 40);
      }
    }
    type();
  }

  showRandomMessage();
  setInterval(showRandomMessage, 10000);

  // ç²’å­çˆ±å¿ƒèƒŒæ™¯
  const canvas = document.getElementById("hearts");
  const ctx = canvas.getContext("2d");
  let width, height;
  function resize() {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  const hearts = Array.from({ length: 60 }, () => ({
    x: Math.random() * width,
    y: Math.random() * height,
    size: Math.random() * 6 + 4,
    speed: Math.random() * 1 + 0.5,
    dx: Math.random() * 1 - 0.5,
    color: `rgba(255, ${100 + Math.random()*155}, ${150 + Math.random()*100}, 0.8)`
  }));

  function drawHearts() {
    ctx.clearRect(0, 0, width, height);
    hearts.forEach(h => {
      ctx.beginPath();
      ctx.moveTo(h.x, h.y);
      ctx.bezierCurveTo(h.x - h.size / 2, h.y - h.size / 2, h.x - h.size, h.y + h.size / 3, h.x, h.y + h.size);
      ctx.bezierCurveTo(h.x + h.size, h.y + h.size / 3, h.x + h.size / 2, h.y - h.size / 2, h.x, h.y);
      ctx.fillStyle = h.color;
      ctx.fill();
      h.y -= h.speed;
      h.x += h.dx;
      if (h.y < -10) h.y = height + 10;
      if (h.x < -10) h.x = width + 10;
      if (h.x > width + 10) h.x = -10;
    });
    requestAnimationFrame(drawHearts);
  }
  drawHearts();

  // ç‚¹å‡»çˆ±å¿ƒç‰¹æ•ˆ
  document.body.addEventListener('click', e => {
    const heart = document.createElement("div");
    heart.textContent = "ğŸ’—";
    heart.style.position = "fixed";
    heart.style.left = e.clientX + "px";
    heart.style.top = e.clientY + "px";
    heart.style.fontSize = "20px";
    heart.style.opacity = 1;
    heart.style.transition = "all 1.2s ease";
    document.body.appendChild(heart);
    setTimeout(() => {
      heart.style.top = (e.clientY - 80) + "px";
      heart.style.opacity = 0;
    }, 10);
    setTimeout(() => heart.remove(), 1300);
  });

  // è‡ªåŠ¨æ’­æ”¾éŸ³ä¹å…¼å®¹å¤„ç†
  window.addEventListener('click', () => {
    const audio = document.getElementById("bgm");
    if (audio.paused) {
      audio.play().catch(() => {});
    }
  });
</script>

</body>
</html>
